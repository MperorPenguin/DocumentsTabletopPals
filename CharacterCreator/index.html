<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Tabletop Friends — Character Creator (Demo)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link href="./style.css" rel="stylesheet" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Arvo:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>
  <header class="topbar">
    <div class="brand">Tabletop <span class="accent">Friends</span></div>
    <nav class="topnav">
      <a class="btn ghost" href="../index.html">⬅ Back to App</a>
      <button class="btn" id="btn-new">New Character</button>
      <button class="btn" id="btn-random">Randomise</button>
      <button class="btn" id="btn-save">Save Character</button>
      <!-- Export -->
      <button class="btn" id="btn-print-pdf" title="Print or Save as PDF">Print / PDF</button>
      <button class="btn ghost" id="btn-download-doc" title="Download editable Word document">Download .doc</button>
    </nav>
  </header>

  <main class="container">
    <!-- Left: Builder -->
    <section class="panel builder">
      <h1>Character Creator</h1>
      <p class="muted small">Guided, ink-friendly export. Saved PCs appear in the DM → Party tab.</p>

      <!-- Stepper -->
      <div class="stepper" id="stepper">
        <button class="step current" data-step="1">1. Basics</button>
        <button class="step" data-step="2">2. Class & Level</button>
        <button class="step" data-step="3">3. Ability Scores</button>
        <button class="step" data-step="4">4. Skills & Proficiencies</button>
        <button class="step" data-step="5">5. Gear • Features • Spells</button>
      </div>

      <!-- FORM -->
      <form id="char-form" autocomplete="off">
        <!-- STEP 1: BASICS -->
        <fieldset class="step-pane current" data-step="1">
          <legend>Basics</legend>
          <div class="grid two">
            <label class="field">
              <span>Name</span>
              <input type="text" id="name" placeholder="E.g., Kael Stormborn" required />
            </label>

            <label class="field">
              <span>Race / Ancestry (Species)</span>
              <select id="race">
                <option>Human</option><option>Elf</option><option>Dwarf</option>
                <option>Halfling</option><option>Tiefling</option><option>Dragonborn</option>
                <option>Half-Orc</option><option>Gnome</option>
              </select>
            </label>

            <label class="field">
              <span>Background</span>
              <select id="background">
                <option>Acolyte</option><option>Criminal</option><option>Folk Hero</option>
                <option>Noble</option><option>Sage</option><option>Soldier</option>
                <option>Urchin</option>
              </select>
            </label>

            <label class="field">
              <span>Alignment</span>
              <select id="alignment">
                <option>Lawful Good</option><option>Neutral Good</option><option>Chaotic Good</option>
                <option>Lawful Neutral</option><option>True Neutral</option><option>Chaotic Neutral</option>
                <option>Lawful Evil</option><option>Neutral Evil</option><option>Chaotic Evil</option>
              </select>
            </label>
          </div>

          <div class="actions">
            <button class="btn next" data-next="2" type="button">Next →</button>
          </div>
        </fieldset>

        <!-- STEP 2: CLASS & LEVEL -->
        <fieldset class="step-pane" data-step="2">
          <legend>Class & Level</legend>
          <div class="grid three">
            <label class="field">
              <span>Class</span>
              <select id="class">
                <option>Barbarian</option><option>Bard</option><option>Cleric</option>
                <option>Druid</option><option>Fighter</option><option>Monk</option>
                <option>Paladin</option><option>Ranger</option><option>Rogue</option>
                <option>Sorcerer</option><option>Warlock</option><option>Wizard</option>
              </select>
            </label>

            <label class="field">
              <span>Level</span>
              <input type="number" id="level" min="1" max="20" value="1" />
            </label>

            <label class="field">
              <span>Hit Points (auto @ L1)</span>
              <input type="number" id="hp" min="1" value="10" />
            </label>
          </div>

          <div class="muted tiny">HP at level 1 = max hit die + CON mod (you can override). Proficiency Bonus auto-scales with level.</div>
          <div class="actions">
            <button class="btn ghost prev" data-prev="1" type="button">← Back</button>
            <button class="btn next" data-next="3" type="button">Next →</button>
          </div>
        </fieldset>

        <!-- STEP 3: ABILITY SCORES + PROF BONUS -->
        <fieldset class="step-pane" data-step="3">
          <legend>Ability Scores</legend>

          <div class="score-modes">
            <button class="btn" type="button" id="btn-standard-array">Apply Standard Array (15,14,13,12,10,8)</button>
            <button class="btn" type="button" id="btn-roll">Roll 4d6 (drop lowest)</button>
            <button class="btn" type="button" id="btn-reset-abilities">Reset</button>
          </div>
          <!-- JS injects point-buy helper: "Point Buy: 27 ... Remaining: X" -->

          <div class="scores-grid">
            <div class="score">
              <span>STR</span>
              <div class="spin">
                <button type="button" class="spin-btn" data-target="str" data-delta="-1">−</button>
                <input type="number" id="str" value="10" min="3" max="20" />
                <button type="button" class="spin-btn" data-target="str" data-delta="1">+</button>
              </div>
              <div class="mod" id="str-mod">mod +0</div>
            </div>

            <div class="score">
              <span>DEX</span>
              <div class="spin">
                <button type="button" class="spin-btn" data-target="dex" data-delta="-1">−</button>
                <input type="number" id="dex" value="10" min="3" max="20" />
                <button type="button" class="spin-btn" data-target="dex" data-delta="1">+</button>
              </div>
              <div class="mod" id="dex-mod">mod +0</div>
            </div>

            <div class="score">
              <span>CON</span>
              <div class="spin">
                <button type="button" class="spin-btn" data-target="con" data-delta="-1">−</button>
                <input type="number" id="con" value="10" min="3" max="20" />
                <button type="button" class="spin-btn" data-target="con" data-delta="1">+</button>
              </div>
              <div class="mod" id="con-mod">mod +0</div>
            </div>

            <div class="score">
              <span>INT</span>
              <div class="spin">
                <button type="button" class="spin-btn" data-target="int" data-delta="-1">−</button>
                <input type="number" id="int" value="10" min="3" max="20" />
                <button type="button" class="spin-btn" data-target="int" data-delta="1">+</button>
              </div>
              <div class="mod" id="int-mod">mod +0</div>
            </div>

            <div class="score">
              <span>WIS</span>
              <div class="spin">
                <button type="button" class="spin-btn" data-target="wis" data-delta="-1">−</button>
                <input type="number" id="wis" value="10" min="3" max="20" />
                <button type="button" class="spin-btn" data-target="wis" data-delta="1">+</button>
              </div>
              <div class="mod" id="wis-mod">mod +0</div>
            </div>

            <div class="score">
              <span>CHA</span>
              <div class="spin">
                <button type="button" class="spin-btn" data-target="cha" data-delta="-1">−</button>
                <input type="number" id="cha" value="10" min="3" max="20" />
                <button type="button" class="spin-btn" data-target="cha" data-delta="1">+</button>
              </div>
              <div class="mod" id="cha-mod">mod +0</div>
            </div>
          </div>

          <div class="grid three" style="margin-top:8px">
            <div class="field">
              <span>Proficiency Bonus</span>
              <input id="prof-bonus" type="text" value="+2" disabled />
            </div>
            <div class="field">
              <span>Saving Throws (auto)</span>
              <div id="save-summary" class="tiny muted">—</div>
            </div>
            <div class="field">
              <span>Armor Class (auto)</span>
              <input id="ac" type="text" value="10" disabled />
            </div>
          </div>

          <div class="actions">
            <button class="btn ghost prev" data-prev="2" type="button">← Back</button>
            <button class="btn next" data-next="4" type="button">Next →</button>
          </div>
        </fieldset>

        <!-- STEP 4: SKILLS & PROFICIENCIES -->
        <fieldset class="step-pane" data-step="4">
          <legend>Skills & Proficiencies</legend>

          <div class="grid two">
            <label class="field">
              <span>Armor/Weapon/Tools Proficiencies</span>
              <select id="proficiencies" multiple size="6">
                <option>Light Armor</option>
                <option>Medium Armor</option>
                <option>Heavy Armor</option>
                <option>Shields</option>
                <option>Simple Weapons</option>
                <option>Martial Weapons</option>
                <option>Hand Crossbows</option>
                <option>Longswords</option>
                <option>Rapiers</option>
                <option>Shortswords</option>
                <option>Thieves’ Tools</option>
                <option>Herbalism Kit</option>
              </select>
              <div class="tiny muted">Hold Ctrl/Cmd to select multiple.</div>
            </label>

            <label class="field">
              <span>Skill Proficiencies</span>

              <div id="skills-help" class="helper muted small" aria-live="polite">
                Select the allowed number of skills for your class.
              </div>

              <div class="skills-list">
                <label class="skill-item"><input type="checkbox" value="Acrobatics"> Acrobatics (DEX)</label>
                <label class="skill-item"><input type="checkbox" value="Animal Handling"> Animal Handling (WIS)</label>
                <label class="skill-item"><input type="checkbox" value="Arcana"> Arcana (INT)</label>
                <label class="skill-item"><input type="checkbox" value="Athletics"> Athletics (STR)</label>
                <label class="skill-item"><input type="checkbox" value="Deception"> Deception (CHA)</label>
                <label class="skill-item"><input type="checkbox" value="History"> History (INT)</label>
                <label class="skill-item"><input type="checkbox" value="Insight"> Insight (WIS)</label>
                <label class="skill-item"><input type="checkbox" value="Intimidation"> Intimidation (CHA)</label>
                <label class="skill-item"><input type="checkbox" value="Investigation"> Investigation (INT)</label>
                <label class="skill-item"><input type="checkbox" value="Medicine"> Medicine (WIS)</label>
                <label class="skill-item"><input type="checkbox" value="Nature"> Nature (INT)</label>
                <label class="skill-item"><input type="checkbox" value="Perception"> Perception (WIS)</label>
                <label class="skill-item"><input type="checkbox" value="Performance"> Performance (CHA)</label>
                <label class="skill-item"><input type="checkbox" value="Persuasion"> Persuasion (CHA)</label>
                <label class="skill-item"><input type="checkbox" value="Religion"> Religion (INT)</label>
                <label class="skill-item"><input type="checkbox" value="Sleight of Hand"> Sleight of Hand (DEX)</label>
                <label class="skill-item"><input type="checkbox" value="Stealth"> Stealth (DEX)</label>
                <label class="skill-item"><input type="checkbox" value="Survival"> Survival (WIS)</label>
              </div>
            </label>
          </div>

          <div class="actions">
            <button class="btn ghost prev" data-prev="3" type="button">← Back</button>
            <button class="btn next" data-next="5" type="button">Next →</button>
          </div>
        </fieldset>

        <!-- STEP 5: GEAR • FEATURES • SPELLS / BACKstory -->
        <fieldset class="step-pane" data-step="5">
          <legend>Gear • Features • Spells / Backstory</legend>

          <div class="helper muted small" id="gear-help" aria-live="polite">
            Choose starter gear. Options filter by your class proficiencies.
          </div>

          <div class="grid two">
            <!-- Armor -->
            <label class="field">
              <span>Armor</span>
              <div id="gear-armor" class="select-cards"></div>
            </label>

            <!-- Weapons -->
            <label class="field">
              <span>Weapons</span>
              <div id="gear-weapons" class="select-cards"></div>
            </label>

            <!-- Adventuring Pack -->
            <label class="field">
              <span>Pack</span>
              <div id="gear-packs" class="select-cards"></div>
            </label>

            <!-- Features & Other details -->
            <label class="field">
              <span>Features / Traits & Other Details</span>
              <textarea id="features" rows="4" placeholder="Class features, feats, racial traits, languages, tool profs…"></textarea>
            </label>

            <!-- Spells (guided selector) -->
            <label class="field">
              <span>Spells</span>
              <div id="spells-wrap"></div>
              <div class="tiny muted">Class-based cantrips & 1st-level picks for level 1 (demo selector).</div>
            </label>

            <!-- Backstory -->
            <label class="field">
              <span>Backstory (optional)</span>
              <textarea id="backstory" rows="6" placeholder="Origin, personality, ideals, bonds, flaws…"></textarea>
            </label>
          </div>

          <div class="actions">
            <button class="btn ghost prev" data-prev="4" type="button">← Back</button>
            <button class="btn" id="btn-save-bottom" type="button">Save Character</button>
          </div>
        </fieldset>
      </form>
    </section>

    <!-- Right: Live Preview & Saved List -->
    <aside class="panel preview">
      <h2>Preview</h2>
      <div id="preview-card" class="card"></div>

      <h2 class="mt">Saved Characters</h2>
      <div id="saved-list" class="list"></div>
    </aside>
  </main>

  <footer class="muted tiny center pad">
    Character Creator (Demo) — “Arvo” font. Primary action: <strong>Lime Green</strong>. Base theme: <strong>Midnight Blue</strong>. Printable sheet uses white background to save ink.
  </footer>

  <script src="./app.js"></script>
</body>
</html>
